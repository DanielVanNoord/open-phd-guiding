#summary Unified cross-platform CMake build system

*Work in progress*

<wiki:toc max_depth="3" />


= Introduction =




= Details =

Add your content here.  Format your content with:
  * Text in *bold* or _italic_
  * Headings, paragraphs, and lists
  * Automatic links to other wiki pages

== Project dependencies ==

The cmake build system depends only on
  * wxWidget on all platforms
  * openCV on Windows

Other dependencies are:
  * openSSAG
  * libdc
  * libusb
  * cfitsio
  * and many more

=== Building wxWidgets ===
We assume 
  * `$WXWIDGET_BASE_DIR` being a variable that points to the untarred sources of wxWidgets.
  * `$wxPREFIX` being a variable that points to the installation prefix of your dependencies.

==== Win32 ====
Open a Visual Studio console and emit the following commands, respectively for the Debug and Release versions of the libraries.
{{{
cd $WXWIDGET_BASE_DIR\build\msw
msbuild wx_vc12.sln /p:configuration=Debug /p:platform=win32 /m:8
msbuild wx_vc12.sln /p:configuration=Release /p:platform=win32 /m:8
}}}

==== OSX ====
The configuration on OSX looks a little bit complicated. We are using XCode 5 and above, which is shipped with Clang 3+.
{{{
cd $WXWIDGET_BASE_DIR
../configure --enable-universal_binary=i386,x86_64 --disable-shared --with-libpng=builtin --with-cocoa --prefix=$wxPREFIX \
             --with-macosx-sdk=/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.9.sdk/ \
             --with-macosx-version-min=10.7 \
             CXXFLAGS="-stdlib=libc++ -std=c++11" \
             OBJCXXFLAGS="-stdlib=libc++ -std=c++11" \
             CPPFLAGS="-stdlib=libc++"  \
             LDFLAGS="-stdlib=libc++" CXX=clang++ CXXCPP="clang++ -E" CC=clang CPP="clang -E"
make
make install
}}}

=== Building openCV ===
We recall that the dependency on openCV is needed on Win32 platforms only. Nothing really needs to be built since the OpenCV
zip contains libraries already built for Windows, and also certainly for your platform. Just download OpenCV from [http://www.opencv.org the official website]
or [http://sourceforge.net/projects/opencvlibrary/ SourceForge].

== Creating the XCode project on OSX ==
{{{
mkdir tmp
cd tmp
cmake -G Xcode -DwxWidgets_PREFIX_DIRECTORY=$wxPREFIX -DCMAKE_OSX_ARCHITECTURES=i386 -DCMAKE_C_FLAGS=-m32 -DCMAKE_CXX_FLAGS=-m32 ..
}}}